$(document).ready((function(){$("#postCommentsTbl").DataTable({processing:!0,serverSide:!0,ajax:{url:postCommentsUrl,type:"GET"},columnDefs:[{targets:[4],orderable:!1,className:"text-center",width:"5%"},{targets:[5],visible:!1}],columns:[{data:function(e){var t=document.createElement("textarea");return t.innerHTML=e.post.title,'<a href="/posts/details/'+e.post.id+'">'+t.value+"</a>"},name:"post.title"},{data:function(e){var t=document.createElement("textarea"),a=document.createElement("textarea");return t.innerHTML=e.name,a.innerHTML=e.email,"<b>"+t.value+"</b><br><p>"+a.value+"</p>"},name:"name"},{data:function(e){var t=e.comment;return e.comment.length>50?t.substr(0,50)+"...":e.comment},name:"comment"},{data:function(e){return moment(e.created_at,"YYYY-MM-DD hh:mm:ss").format("Do MMM, YYYY")},name:"created_at"},{data:function(e){return prepareTemplateRender("#postCommentsActionTemplate",[{id:e.id}])},name:"id"},{data:function(){return""},name:"email"}]})})),$(document).on("click",".delete-btn",(function(e){var t=$(e.currentTarget).data("id");deleteItem(deleteComment+"/"+t,"#postCommentsTbl",Lang.get("messages.post_comment.post_comment"))})),$(document).on("click",".show-btn",(function(e){if(!ajaxCallIsRunning){ajaxCallInProgress();var t=$(e.currentTarget).attr("data-id");$.ajax({url:showComment+"/"+t,type:"GET",success:function(e){if(e.success){$("#postTitle,#postComment,#postUser,#postEmail,#postCreatedOn").html(""),$("#postTitle").append(e.data.post.title),$("#postComment").append(e.data.comment),$("#postUser").append(e.data.name),$("#postEmail").append(e.data.email);var t=moment(e.data.created_at).fromNow();$("#postCreatedOn").append(t),$("#showModal").appendTo("body").modal("show"),ajaxCallCompleted()}},error:function(e){displayErrorMessage(e.responseJSON.message)}})}}));