(()=>{"use strict";$(document).ready((function(){$("#companyTbl").DataTable({processing:!0,serverSide:!0,order:[[1,"asc"]],ajax:{url:getCompaniesUrl,type:"GET"},columnDefs:[{targets:[0],searchable:!1,orderable:!1,className:"text-center",width:"5%"},{targets:[1],className:"text-center",width:"8%"},{targets:[2],className:"text-left",width:"15%"},{targets:[3],className:"text-left",width:"15%"},{targets:[4],className:"text-left",width:"15%"},{targets:[5],className:"text-center",width:"12%"},{targets:[6],className:"text-center",width:"12%"},{targets:[7],className:"text-center",width:"10%"},{targets:[8],className:"text-center",width:"8%",orderable:!1}],columns:[{data:function(e){return'<input type="checkbox" name="companies[]" class="companyCheckBox" value="'+e.id+'">'},name:"id"},{data:"id",name:"id"},{data:"name",name:"name"},{data:"contact_name",name:"contact_name"},{data:function(e){return e.contact_person_phone||e.phone||"-"},name:"phone"},{data:"support",name:"support"},{data:"latest_activity",name:"latest_activity"},{data:"status",name:"status"},{data:function(e){return'<a title="Edit" class="btn btn-warning action-btn edit-btn" href="'+companiesUrl+"/"+e.id+'/edit"><i class="fa fa-edit"></i></a> <a title="Delete" class="btn btn-danger action-btn delete-btn" data-id="'+e.id+'" href="#"><i class="fa fa-trash"></i></a>'},name:"id"}]}),$("#filter_featured").select2({width:"170px"}),$("#filter_status").select2()})),$(document).ready((function(){$("#filter_featured").select2({width:"170px"}),$("#filter_status").select2()})),$(document).on("click",".adminMakeFeatured",(function(e){var t=$(e.currentTarget).data("id");makeFeatured(t)})),window.makeFeatured=function(e){$.ajax({url:companiesUrl+"/"+e+"/mark-as-featured",method:"post",cache:!1,success:function(e){e.success&&(displaySuccessMessage(e.message),$('[data-toggle="tooltip"]').tooltip("hide"),window.livewire.emit("refresh"))},error:function(e){displayErrorMessage(e.responseJSON.message)}})},$(document).on("click",".adminUnFeatured",(function(e){var t=$(e.currentTarget).data("id");makeUnFeatured(t)})),window.makeUnFeatured=function(e){$.ajax({url:companiesUrl+"/"+e+"/mark-as-unfeatured",method:"post",cache:!1,success:function(e){e.success&&(displaySuccessMessage(e.message),$('[data-toggle="tooltip"]').tooltip("hide"),window.livewire.emit("refresh"))},error:function(e){displayErrorMessage(e.responseJSON.message)}})},$(document).on("click",".delete-btn",(function(e){var t=$(e.currentTarget).attr("data-id");swal({title:Lang.get("messages.common.delete"),text:Lang.get("messages.common.are_you_sure_want_to_delete")+'"'+Lang.get("messages.company.employer")+'" ?',type:"warning",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,confirmButtonColor:"#6777ef",cancelButtonColor:"#d33",cancelButtonText:Lang.get("messages.common.no"),confirmButtonText:Lang.get("messages.common.yes")},(function(){window.livewire.emit("deleteEmployee",t)}))})),document.addEventListener("delete",(function(){swal({title:Lang.get("messages.common.deleted"),text:Lang.get("messages.company.employer")+Lang.get("messages.common.has_been_deleted"),type:"success",confirmButtonColor:"#6777ef",timer:2e3})})),$(document).on("change",".isFeatured",(function(e){var t=$(e.currentTarget).data("id");activeIsFeatured(t)})),$(document).on("change",".isActive",(function(e){var t=$(e.currentTarget).data("id");changeIsActive(t)})),window.changeIsActive=function(e){$.ajax({url:companiesUrl+"/"+e+"/change-is-active",method:"post",cache:!1,success:function(e){e.success&&(displaySuccessMessage(e.message),window.livewire.emit("refresh"))},error:function(e){displayErrorMessage(e.responseJSON.message)}})},$(document).on("change",".is-email-verified",(function(e){if(!$(this).is(":checked"))return!1;var t=$(e.currentTarget).data("id");changeEmailVerified(t),$(this).attr("disabled",!0)})),window.changeEmailVerified=function(e){$.ajax({url:companiesUrl+"/"+e+"/verify-email",method:"post",cache:!1,success:function(e){if(e.success)return displaySuccessMessage(e.message),window.livewire.emit("refresh"),!0},error:function(e){displayErrorMessage(e.responseJSON.message)}})},$(document).on("click",".send-email-verification",(function(e){var t=$(e.currentTarget).attr("data-id");$.ajax({url:companiesUrl+"/"+t+"/resend-email-verification",type:"post",success:function(e){if(e.success)return displaySuccessMessage(e.message),!0},error:function(e){displayErrorMessage(e.responseJSON.message)}})})),$(document).ready((function(){$("#filter_featured").on("change",(function(e){var t=$("#filter_featured").select2("val");window.livewire.emit("changeFilter","featured",t)})),$("#filter_status").on("change",(function(e){var t=$("#filter_status").select2("val");window.livewire.emit("changeFilter","status",t)}))}))})();