(()=>{"use strict";function e(){0==$("#comment-count").text().replace("(","").replace(")","")&&$("#post-comment").hide()}$(document).on("submit","#commentForm",(function(e){var t;e.preventDefault(),processingBtn("#commentForm","#submitBtn","loading"),""===$(".comment-id").val()?$.ajax({type:"POST",url:blogComment,data:$("#commentForm").serialize(),success:function(e){if(e.success){location.reload();var t=$(".comments-area").find(".comment").length+1;0===$(".comments-area").find(".comment").length||$(".comment-count span").empty(),$(".comment-count").append("<span>("+t+")</span>"),t>=0&&$("#post-comment").show();var m=[{image:isEmpty(e.data.user)?defaultImage:e.data.user.avatar,commentName:e.data.name,commentCreated:moment(e.data.created_at).format("DD, MMM yy hh:mm a"),comment:e.data.comment,id:e.data.id}];$(".comment-box").prepend(prepareTemplateRender("#blogCommentTemplate",m)),$("#commentForm")[0].reset(),displaySuccessMessage(e.message)}},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){processingBtn("#commentForm","#submitBtn")}}):(t=$(".comment-id").val(),$.ajax({type:"PUT",url:commentUrl+"/"+t+editCommentUrl,data:$("#commentForm").serialize(),success:function(e){$("#comment-"+t).html(""),$("#comment-"+t).html(e.data.comment),$("#commentForm")[0].reset(),$(".comment-id").val(""),displaySuccessMessage(e.message),processingBtn("#commentForm","#submitBtn")},error:function(e){displayErrorMessage(e.responseJSON.message)}}))})),$(document).on("click",".delete-comment-btn",(function(t){t.preventDefault();var m=$(this).data("id"),n=$(this);swal({title:Lang.get("messages.common.delete"),text:Lang.get("messages.common.are_you_sure_want_to_delete")+'"'+Lang.get("messages.post.comment")+'" ?',type:"warning",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,confirmButtonColor:"#6777ef",cancelButtonColor:"#d33",cancelButtonText:Lang.get("messages.common.no"),confirmButtonText:Lang.get("messages.common.yes")},(function(){$.ajax({type:"DELETE",url:commentUrl+"/"+m,success:function(t){n.closest(".comment").remove(),$(".comment-count span").empty(),0!==$(".comments-area").find(".comment").length?$(".comment-count").append("<span>("+$(".comments-area").find(".comment").length+")</span>"):e(),swal({title:Lang.get("messages.common.deleted"),text:Lang.get("messages.post.comment")+Lang.get("messages.common.has_been_deleted"),type:"success",confirmButtonColor:"#1967D2",timer:2e3})}})}))})),$(document).on("click",".edit-comment-btn",(function(e){e.preventDefault();var t=$(this).data("id");$(".comment-id").val($(".delete-comment-btn").data("id")),$.ajax({type:"GET",url:commentUrl+"/"+t,success:function(e){$(".comment").val(e.data.comment),$(".comment-name").val(e.data.name),$(".comment-id").val(e.data.id),$("#comment-field").focus()},error:function(e){displayErrorMessage(e.responseJSON.message)}})})),e()})();